{% extends "dashboard/base_dashboard.html" %}
{% load i18n %}

{% block dashboard_title %}{% trans "Order Details" %}{% endblock %}
{% block dashboard_page_title %}{% blocktrans with order_number=order.number %}Order #{{ order_number }}{% endblocktrans %}{% endblock %}

{% block dashboard_content %}
<div class="bg-white shadow overflow-hidden sm:rounded-lg">
    <div class="px-4 py-5 sm:px-6">
        <div class="flex justify-between items-center">
            <div>
                <h3 class="text-lg leading-6 font-medium text-gray-900">{% trans "Order Details" %}</h3>
                <p class="mt-1 max-w-2xl text-sm text-gray-500">{% blocktrans with date=order.date_placed|date:"d M Y, H:i" %}Placed on {{ date }}{% endblocktrans %}</p>
            </div>
            <div>
                <span class="px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">
                    {{ order.status }}
                </span>
            </div>
        </div>
    </div>

    <div class="border-t border-gray-200">
        <ul role="list" class="divide-y divide-gray-200">
            {% for line in order.lines.all %}
            <li class="p-4 sm:p-6">
                <div class="flex items-center">
                    <div class="w-20 h-20 bg-gray-200 rounded-lg flex-shrink-0"></div>
                    <div class="ml-4 flex-1">
                        <p class="font-semibold text-gray-900">{{ line.product_title }}</p>
                        <p class="text-sm text-gray-500">{% trans "Quantity:" %} {{ line.quantity }}</p>
                    </div>
                    <p class="font-semibold text-gray-900">฿{{ line.line_price_excl_tax|floatformat:2 }}</p>
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
    
    <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
                <h4 class="text-base font-medium text-gray-900 mb-2">{% trans "Shipping Address" %}</h4>
                <address class="text-sm text-gray-600 not-italic">
                    {{ order.shipping_address.first_name }} {{ order.shipping_address.last_name }}<br>
                    {{ order.shipping_address.address_line_1 }}<br>
                    {% if order.shipping_address.address_line_2 %}{{ order.shipping_address.address_line_2 }}<br>{% endif %}
                    {{ order.shipping_address.city }}, {{ order.shipping_address.postal_code }}<br>
                    {{ order.shipping_address.country_code }}
                </address>
            </div>
            <div class="space-y-2">
                <div class="flex justify-between text-sm">
                    <dt class="text-gray-500">{% trans "Subtotal" %}</dt>
                    <dd class="text-gray-900">฿{{ order.total_excl_tax|floatformat:2 }}</dd>
                </div>
                <div class="flex justify-between text-base font-medium text-gray-900 border-t pt-2 mt-2">
                    <dt>{% trans "Total" %}</dt>
                    <dd>฿{{ order.total_excl_tax|floatformat:2 }}</dd>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
